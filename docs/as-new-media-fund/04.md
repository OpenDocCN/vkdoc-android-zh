# 四、数字音频：概念和术语

现在，您已经了解了数字图像新媒体内容的基本概念、术语和原则以及 Android Studio 和 Android OS 支持的文件格式，是时候了解数字音频新媒体内容以及 Android Studio 和 Android OS 支持的许多文件格式了。您将了解模拟音频背后的概念，以及如何将其数字化为数字音频，因为许多模拟和数字波形概念适用于两种音频介质。

您将了解波或空气如何创造音频和模拟音频概念，如振幅和频率，以及数字音频概念，如样本和分辨率。您将了解先进的数字音频概念，如比特率、流、高清音频和受控数字音频。最后，您将看到 Android 5 OS 支持的所有强大的数字音频格式，您可以使用这些格式来开发 Android Studio 新媒体应用。

## 音频概念和术语

在本章中，我将让您快速了解模拟音频概念和术语，以及数字音频概念和术语。您将看到模拟音频和数字音频之间的转换是如何通过一种叫做采样的过程实现的，从事声音设计和音乐合成的人对此已经非常熟悉。您将看到使用比特率、流和现在用于广播电台和卫星的新 24 位高清音频标准对音频进行编码。您还将了解 Android Studio 中支持的音频编解码器(音频文件格式)。您将在第五章中了解数字音频数据足迹优化。我需要确保您对您最终将使用 Android 的数字音频兼容类(如 SoundPool 和 MediaPlayer)创建、优化和“渲染”的数字音频新媒体素材有深刻的理解。

### 模拟音频的基础:空气的声波

就像数字成像一样，数字音频可能相当复杂，尤其是在专业水平上。这种复杂性部分来自于将模拟音频技术和数字音频技术结合在一起的需要，因为现代设备是数字的。模拟音频过去是通过使用不同尺寸的扬声器锥体来产生的，这些锥体是用一种或另一种太空时代的材料制成的弹性薄膜制造的。这些扬声器通过振动或脉冲产生声波。我们的耳朵以完全相反的方式接收这种模拟音频，仍然在现场音乐会上使用:通过捕捉和接收不同波长的空气脉冲或振动，然后将它们转化为我们大脑可以处理的“数据”。这就是你如何“听到”这些声波，然后我们的大脑将这些不同的音频声波频率解释为不同的音符或音调。

声波根据其频率产生不同的音调。宽、长或不频繁的波周期产生较低的(低音)音调；而更频繁(更短)的波长产生更高(高音)的音调。有趣的是，不同频率的光产生不同的颜色，因此模拟声音(音频)和模拟光(颜色)之间有着非常密切的相关性，这也体现在数字制作技术和原理中。

声波的音量取决于声波的振幅或波的高度(垂直尺寸)。因此，声波的频率等于声波在 x 轴上的间距，如果你在 2D 观察，振幅等于声波在 y 轴上的高度。

声波可以被独特地成形，这允许它们模仿不同的声音效果。您的基线声波类型称为正弦波，这是您在高中数学中通过正弦、余弦和正切数学函数学到的。

熟悉合成器键盘的人都知道，声音设计中还使用了其他形状的声波，例如看起来像锯子边缘的锯齿波(因此得名)，或者是使用直角整形的脉冲波，可以立即产生转换为脉冲的开/关声音。

甚至可以在声音设计中使用随机波形(如噪声)来获得尖锐的声音效果。您可能已经使用第三章中的数据足迹优化知识确定，声波中出现的“混乱”或噪声越多，编解码器就越难压缩它们。这导致该特定声音的更大的数字音频数据足迹。

接下来，您将进一步了解如何通过采样将模拟声波转化为数字音频数据，采样是声音设计和音乐合成的核心工具之一。

### 数字音频:样本、分辨率和频率

将模拟音频(声波)转换为数字音频数据的过程称为采样。如果你在音乐行业工作，你可能听说过一种叫做“采样器”的键盘(或架装设备)采样是将音频波分割成片段的过程，因此您可以使用数字音频格式将波形存储为数字音频数据。这将一个无限精确的声波转化为离散的数字数据；也就是说，分成 0 和 1。使用的 0 和 1 越多，无限精确(原始)模拟声波的再现就越精确。采样精度或分辨率决定了用于再现模拟声波的 0 和 1 的数量(您将在下一个主题中讨论)。

被采样的声波的每个数字片段被称为样本，因为它在那个精确的时间点对声波进行采样。样本的精度由用于定义每个波形切片高度的数据量决定。就像数字成像一样，这种精度被称为您的分辨率，或者更准确地说(没有双关语)，样本分辨率。

音频样本分辨率定义为 8 位、12 位、16 位、24 位或 32 位。在数字成像和数字视频中，分辨率由颜色通道的数量来量化；在数字音频中，分辨率由用于定义每个音频样本的数据位来量化。在数字图像中，颜色越多，质量越好；在音频中，更高的采样分辨率可以产生更好的声音再现。

因此，更高的采样分辨率，或使用更多的数据来再现给定的声波样本，以更大的数据足迹为代价，产生更高的音频回放质量。

这就是为什么 16 位音频，称为“CD 质量音频”，听起来比 8 位音频更好；就像真彩色图像总是比索引彩色图像更好看一样。

在数字音频领域，消费电子行业现在有一种 24 位音频采样，称为“高清音频”。HD 数字音频广播电台使用 24 位样本分辨率，因此每个音频样本或声波片段包含 16，777，216 个潜在样本分辨率。一些较新的 Android 设备现在支持高清音频，例如你看到的宣传具有“高清质量”数字音频播放的智能手机。

为了让 Android 硬件设备播放这种高清音频格式，您必须拥有 24 位音频硬件；因此，我建议使用 16 位音频，您将在第五章了解音频数据占用优化。

除了数字音频采样分辨率，您还有一个数字音频采样频率。这定义了在任何给定的采样分辨率下，在一秒采样时间内采集的样本数。在数字图像中，采样频率类似于图像中包含的像素数。采样频率也可以称为采样率。CD 音质音频被定义为使用 16 位采样分辨率和 44.1 kHz 采样速率。这需要 44，100 个样本，每个样本包含 16 位的样本分辨率，或者每个样本中保存的数字音频数据的潜在最大 65，536 个数据值。

让我们做一些数学计算，找出原始(未压缩)数字音频数据在一秒钟内的数据位数。这可以通过将 65，536 样本分辨率乘以 44，100 样本频率来计算。这产生 2，890，137，600 个值的数据值，其可用于表示一秒钟的 CD 质量音频。音频编解码器将它压缩到非常小的文件大小，你将在第五章中看到。

关键是，使用数字音频也存在与数字成像完全相同的权衡。如果包含更多的数据，可以获得更高质量的结果，但代价是占用更多的数据。幸运的是，音频编解码器做得更好，提供了比数字图像编解码器更好的质量-文件大小结果。

数字音频行业常见的音频采样速率包括 8 kHz、11.25 kHz、22.5 kHz、32 kHz、44.1 kHz、48 kHz、96 KHz、192 kHz 以及最近的 384 kHz。正如你可能已经猜到的，我喜欢使用能被 2 的幂整除的那些(8 位)，所以我倾向于 8 kHz(低质量)、32 kHz(中等质量)和 48 kHz(高质量)，正如你将在第五章中看到的。

较低的采样率，例如 8 kHz、11 kHz 或 22 kHz，对于采样“基于语音的”数字音频，例如电影对话轨道或电子书旁白轨道，是最佳的。

更高的音频采样率，如 32 kHz 或 48 kHz，更适合音乐和可能的声音效果，如隆隆的雷声，这绝对需要高动态范围以实现高保真再现。

只要使用的采样分辨率是 16 位质量，使用较低的 11 kHz 或 22 kHz 采样速率就可以获得某些声音效果。最终，在数字音频优化过程中，您将不得不使用您的耳朵作为向导，以确定您的听觉质量与数字音频素材文件大小之间的权衡。

### 数字音频数据:传输和数字化

正如我提到的，卓越音频质量的行业基准被称为 CD 质量音频，其定义为 16 位数据采样分辨率和 44.1 kHz 数据采样频率。这是早在 20 世纪用于生产音频 CD 产品的材料，今天仍被用作最低质量标准。还有更新的高清音频标准，使用 48 kHz 或 96 kHz 采样频率的 24 位数据样本。如今，这种技术被用于高清收音机，以及兼容高清音频的 Android 设备，如“Hi-Fi”高清音频智能手机。由于 Android 操作系统支持 16 位 48 kHz 音频，我倾向于将此作为我的高质量音频妥协，因为数据占用更小。让我们来看看如何在 Android Studio 中使用这些素材。你是将音频存储在应用中，还是从远程服务器上传？你会使用什么样的音频回放或流比特率？

#### 数字音频传输:流音频还是固定音频？

就像第 6 和第七章中提到的数字视频一样，数字音频素材可以是受控的，或者包含在 Android 应用 APK 文件中，音频文件在`/raw`文件夹中，或者数字音频素材可以通过使用远程数据服务器进行流式传输。与数字视频类似，流式数字音频数据的好处是它可以减少 Android 应用 APK 文件的数据占用量。缺点是可靠性。正如你将在本书中看到的，许多相同的概念同样适用于图像、音频和视频。

流式音频节省了数据空间，因为您不必在 APK 文件中包含所有数据量大的新媒体数字音频。因此，如果您计划编写自动点唱机应用，您可能会考虑流式数字音频数据，因为您不会希望将您的歌曲库打包到您的 APK 文件中，因为它将是 10gb(对于大型库而言)。

否则，对于应用音频，如用户界面反馈声音、游戏音频等，请尝试优化您的数字音频数据，以便您可以将其作为专属素材包含在 APK 文件中。这样，您的应用用户就可以在需要时使用它。在本章的音频基础知识之后，您将在第五章中了解优化。

流式数字音频的缺点是，如果您的用户连接(或您的音频服务器)中断，您的音频文件可能无法供最终用户播放和收听！数字音频数据流的可靠性和可用性是另一个需要考虑的关键因素，即流式音频与强制数字音频的区别。

第七章讨论了数字视频数据占用空间优化考虑的相同权衡。

#### 流式数字音频数据:优化设置您的比特率

数字音频流的一个主要概念是数字音频数据的比特率。同样，这与数字视频非常相似；您在学习数字视频之前学习数字音频的原因是，数字视频是由数字图像序列和数字音频组成的，所以我需要先介绍这些概念和术语。

数字音频比特率在压缩过程中由您在优化工作过程中为编解码器提供的设置来定义。在第五章中，您将看到数据占用优化，因为它与数字音频相关，您将使用 Audacity 2.1 来优化您自己的样本数字音频素材。

与数字视频一样，需要支持较低比特率以适应较慢带宽网络的数字音频文件将对数字音频数据进行更多压缩，这将导致较低的音频质量水平。

这些可以在更多设备上流畅播放。这是因为在任何给定的数据网络上，如果有较少的字节要传输，那么硬件设备中的 CPU 要处理的字节也较少。

随着处理器越来越快，它每秒可以处理更多的字节。随着数据带宽连接变得更快，它可以更舒适地每秒发送或接收更多的字节。

因此，请务必记住，您不仅要针对快速网络传输优化文件大小，还要针对新媒体素材将使用的系统内存量以及 CPU 用于处理新媒体素材数据(播放音频、播放视频、显示图像、渲染矢量等)的处理周期数进行优化。).

### Android 中的数字音频:文件格式

Android 中的数字音频编解码器比数字图像编解码器多得多(只有四种图像编解码器:PNG、JPEG、GIF 和 WebP)。Android 音频支持包括. MP3 (MPEG-3)文件；。WAV (PCM 或脉冲编码调制)波形文件；. MP4 或. M4A (MPEG-4)文件；。OGG (OGG Vorbis)音频文件；。MKS (Matroska)文件；。FLAC(免费无损音频编解码器)文件；还有。MID，。MXMF，还有。XMF MIDI(乐器数据接口)文件，从技术上讲，它们甚至根本不是真正的数字音频数据。

我先解释一下什么是 MIDI。这不是您可能在 Android Studio 应用中使用的格式，但它是数字音频历史的基础，并且在其数字播放器钢琴演奏回放方法中是独一无二的。我将它包含在本章中，因为它有一些独特的、高度数据占用优化的应用。之后，我将介绍所有的采样数字音频格式。

### MIDI:乐器数据接口

MIDI 代表乐器数据接口，它是使用电脑处理音频的最早方式之一。MIDI 的起源可以追溯到 20 世纪 80 年代，所以 MIDI 已经存在几十年了。

第一台配备 MIDI 数据端口硬件的计算机是 Atari ST 1040。这台电脑允许我将键盘合成器(当时是 Korg M1)插入它的 MIDI 端口。MIDI 允许我使用电脑来演奏和录制演奏数据，电脑使用 MIDI 数据格式以及被称为 MIDI 音序器的音频软件，因为它对回放数据进行排序。

MIDI 文件不包含样本数据；也就是说，它们不包含音频数据，只包含演奏数据。当电脑使用 MIDI 硬件(接口、电缆和端口)将这些演奏数据回放到合成器中时，合成器会使用 MIDI 演奏数据生成音频音调。

MIDI 记录合成器或采样器键盘上的按键何时被按下，以及按键持续时间、按下的力度(触后响应)和类似的性能细微差别。

当 MIDI 文件通过合成器回放时，它复制了表演者或作曲家的精确表演；即使那个人不再播放演奏曲目，电脑仍会播放。您可以演奏您的乐器轨道，使用 MIDI 数据录制您的乐器演奏，然后 MIDI 音序器将为您演奏演奏，同时，您可以在第一个乐器轨道旁边演奏第二个乐器轨道。

MIDI 使歌曲作者仅用他们的电脑就能组合复杂的音乐作品。这当然比雇佣工作室和音乐家要便宜。如果你想成为一名词曲作者，你可以在 [`http://rosegardenmusic.com`](http://rosegardenmusic.com/) 下载开源的 MIDI 软件 Rosegarden。玫瑰园不仅是一个 MIDI 音序器，而且它还包括音乐记谱法，也称为得分。这意味着你不必知道如何在五线谱上写音符和谱号来发布你的音乐！

Android 操作系统支持 MIDI 文件的回放，但没有为它们的创建实现 MIDI 类。希望这在未来会有所改变，但就目前来看，在 Android Studio 中编写 MIDI 音序器并不是一件容易的事情；但是，编码论坛上有人在说。

因此，MIDI 超出了本书的范围。我在这里介绍它只是为了让您了解 Android Studio (Android OS)中数字音频支持的历史和范围。MIDI 在数字音频的发展中扮演着重要的角色，它是音乐合成和声音设计的关键组成部分。

### MPEG-3 音频:流行的 MP3 数据格式

Android Studio 中最流行的数字音频格式是 MP3 数字音频文件格式。你们大多数人都熟悉 MP3 数字音频文件，这些文件可以在音乐下载网站上找到，比如 Napster。我们大多数人都收集了这种格式的歌曲，用于流行的 MP3 播放器和我们的 CD-ROM 音乐收藏中。

这种 MP3 数字音频文件格式受欢迎的原因是因为它具有相对较好的压缩比，而且播放 MP3 音频文件所需的编解码器随处可见，甚至在 Android 操作系统中也是如此。

只要您通过使用开源 Audacity 2.1 音频软件(在第五章中介绍)对音频数据占用优化使用最佳编码工作流程，就可以在您的 Android Studio 应用中使用 MP3 格式。由于软件专利，Audacity 不能包含 MP3 编码软件或从自己的网站分发 MP3 软件，所以一定要为 Audacity 下载并安装一个免费的 LAME 编码器。

值得注意的是，MP3 编解码器输出有损音频文件格式(就像 JPEG 对图像所做的那样)，其中一些音频数据以及质量在压缩过程中会被丢弃，并且无法恢复。

Android 支持一种叫做 FLAC 的开源无损音频编解码器。这代表免费无损音频编解码器。由于软件解码器的免费性质，对 FLAC 的支持像 MP3 一样广泛(编解码器是编码器-解码器，就像在代码-解码中一样)。

### FLAC:24 位免费无损音频编解码器

FLAC 使用快速算法，因此解码器针对速度进行了高度优化。FLAC 支持 24 位音频，使用它没有专利问题。如果您需要高质量的音频和合理的数据占用，这是一个很好的音频编解码器，可以在 Android Studio 中使用。FLAC 支持一系列采样分辨率，从每个采样 4 位数据到 32 位数据采样。它还支持大范围的采样频率，从 1 Hz 到 65，535 Hz(或 65 kHz)，增量为 1Hz，因此非常灵活。从音频播放硬件的角度来看，我建议使用 16 位采样分辨率，以及 44.1 kHz 或 48 kHz 的采样频率，除非你的目标是高清音频。

Android 3.1 或更高版本支持 FLAC。因此，如果您的最终用户正在使用当前的 Android 设备，您应该能够安全地利用这个 FLAC 编解码器。在 Android 应用开发中使用完全无损的新媒体素材(如 PNG8、PNG24、PNG32 或 FLAC)是可能的，只要你的应用是针对 Android 3.1 或更高版本的硬件设备。接下来，让我们看看另一个令人印象深刻的开源编解码器。

### OGG Vorbis:有损开源音频编解码器

Android 支持的另一种开源数字音频编解码器是 OGG Vorbis 格式。这个有损音频编解码器是由 Xiph.Org 基金会带给你的。Vorbis 编解码器数据通常保存在。OGG 音频数据文件扩展名，因此，Vorbis 通常被称为 Ogg Vorbis 数字音频数据格式。

Ogg Vorbis 支持 8 kHz 至 192 kHz 的采样速率，并支持 255 个离散数字音频通道。如你所知，这代表 8 位的音频通道。OGG Vorbis 支持所有 Android 版本或 API 级别的版本。

Vorbis 正在迅速接近 MPEG HE-AAC 和 Windows Media Audio Professional 的质量，其质量优于 MP3、AAC-LC 和 WMA。这是一种有损格式，因此 FLAC 编解码器的再现质量优于 Ogg Vorbis，因为 FLAC 包含所有原始数字音频样本数据。

### MPEG-4 音频:高级音频编码(AAC)

Android 支持所有 MPEG-4 AAC(高级音频编码)编解码器，包括 AAC-LC、HE-AAC 和 AAC-ELD。应该使用 MPEG-4 文件容器(. 3gp、. mp4 或. m4a 文件扩展名)来包含这些文件。AAC-LC 和 HE-AAC 可以用所有版本的 Android 解码。AAC-ELD 仅在 Android OS 4.1 之后受支持。ELD 代表增强型低延迟；该编解码器旨在用于实时双向通信应用，如数字对讲机或 Dick Tracy 风格的智能手表应用。

最简单的 AAC 编解码器是 AAC-LC(低复杂度)编解码器，使用最广泛。这对大多数数字音频编码应用来说已经足够了。与 MP3 编解码器相比，AAC-LC 以更低的数据占用量产生更高质量的结果。

作为最复杂的 AAC 编解码器，HE-AAC(高效)编解码器支持 8 kHz 至 48 kHz 的采样速率，以及立体声和杜比 5.1 声道编码。安卓解码 V1 和 V2 级别的 HE-AAC。Android 也可以在 4.1 版以后的 Android 设备中使用 HE-AAC-V1 编解码器对音频进行编码。

由于软件专利，Audacity 不包括 MPEG-4 编码器。在开始第五章之前，请务必从 [`http://lame.buanzo.org`](http://lame.buanzo.org/) 下载并安装 Audacity 的免费 FFMPEG 2.2.2 编码器，在那里您将使用最新的 Audacity 2.1.1！

### MPEG-4 AMR:自适应多速率音频编解码器

对于编码语音来说，它通常具有与音乐不同的声波类型，还有另外两种 AMR(自适应多速率)音频编解码器，它们对于编码语音或“短脉冲”声音效果等非常有效。

Android 中有一个 AMR-WB(自适应多速率宽带)编解码器，支持 9 种离散设置，从 6.6 kbps 比特率到 23.85 kbps，采样频率为 16 kHz。就语音而言，这是一个相当高的采样率！例如，如果您正在创建交互式电子书 Android Studio 应用，这是在旁白音轨上使用的编解码器。

Android 中还有一个 AMR-NB(自适应多速率窄带)编解码器，支持 8 种离散设置，从 4.75 kbps 到 12.2 kbps 音频比特率，采样频率为 8 kHz，如果进入编解码器的数据是高质量的，或者如果由于内容的噪声性质(例如炸弹爆炸)，产生的音频样本不需要高质量，这是一个足够的采样速率。

### PCM 音频:脉冲编码调制编解码器

最后，Android 支持 PCM(脉冲编码调制)编解码器，通常称为 Windows WAVE。WAV)音频格式或苹果 AIFF(音频交换文件格式)。你们大多数人都熟悉这两种流行操作系统之一的无损数字音频格式。它是无损的，因为应用了零压缩。PCM 音频通常用于 CD-ROM 内容以及电话应用。这是因为 PCM Wave 音频是一种未压缩的数字音频格式，它没有应用于数据流的 CPU 密集型压缩算法，因此解码(CPU 开销)对于电话设备或 CD 播放器来说不是问题。

因此，当您在第五章开始将数字音频素材压缩成各种文件格式时，您可以使用 PCM 作为您的“基准”文件格式。但是，您可能不会将 PCM 放入您的 APK 文件中，因为还有其他格式，如 FLAC 和 MPEG-4 AAC，它们可以使用数量级更少的数据提供相同的质量。

最终，对于任何给定的音频数据，找出哪些 Android 支持的音频格式具有最佳数字音频效果的唯一方法是，实际上在所有您知道的受良好支持且高效的主要编解码器中对数字音频进行编码。我在第五章向你展示这是如何完成的。

## 摘要

在本章中，您了解了数字音频的概念、原理以及压缩和解压缩数字音频素材的 Android 音频文件格式。您了解了音频声波、频率、振幅、采样、采样分辨率和比特率，以及这些如何定义您的数字音频素材。

在下一章中，您将了解数字音频数据占用优化的概念、术语和原则。